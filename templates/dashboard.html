<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>–î–æ—à–∫–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞</title>
  <link rel="stylesheet" href="/static/style.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <h2 style="text-align: center;">–ê–Ω–∞–ª—ñ—Ç–∏—á–Ω—ñ –≥—Ä–∞—Ñ—ñ–∫–∏</h2>
  <a href="/" class="back-button">‚Üê –î–æ –≤—Ö–æ–¥—É</a>
  <div style="display: flex; gap: 40px; margin-top: 40px;">
    <!-- –õ—ñ–≤–∞ –∫–æ–ª–æ–Ω–∫–∞: –¥–æ—Ö–æ–¥–∏ -->
    <div style="flex: 1; display: flex; flex-direction: column; gap: 40px;">
      <div>
        <h3>–°–µ—Ä–µ–¥–Ω—è –æ—Ü—ñ–Ω–∫–∞ –¥–æ—Ö–æ–¥—ñ–≤ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä—ñ—è—Ö</h3>
        <canvas id="incomeRatingChart" width="600" height="300"></canvas>
      </div>
      <div>
        <h3>–ó–∞–ª–µ–∂–Ω—ñ—Å—Ç—å —Å–µ—Ä–µ–¥–Ω—å–æ—ó —Å—É–º–∏ –≤—ñ–¥ —Å–µ—Ä–µ–¥–Ω—å–æ—ó –æ—Ü—ñ–Ω–∫–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ (–î–æ—Ö–æ–¥–∏)</h3>
        <canvas id="incomeLineChart" width="600" height="300"></canvas>
      </div>
    </div>

    <!-- –ü—Ä–∞–≤–∞ –∫–æ–ª–æ–Ω–∫–∞: –≤–∏—Ç—Ä–∞—Ç–∏ -->
    <div style="flex: 1; display: flex; flex-direction: column; gap: 40px;">
      <div>
        <h3>–°–µ—Ä–µ–¥–Ω—è –æ—Ü—ñ–Ω–∫–∞ –≤–∏—Ç—Ä–∞—Ç –ø–æ –∫–∞—Ç–µ–≥–æ—Ä—ñ—è—Ö</h3>
        <canvas id="expenseRatingChart" width="600" height="300"></canvas>
      </div>
      <div>
        <h3>–ó–∞–ª–µ–∂–Ω—ñ—Å—Ç—å —Å–µ—Ä–µ–¥–Ω—å–æ—ó —Å—É–º–∏ –≤—ñ–¥ —Å–µ—Ä–µ–¥–Ω—å–æ—ó –æ—Ü—ñ–Ω–∫–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ (–í–∏—Ç—Ä–∞—Ç–∏)</h3>
        <canvas id="expenseLineChart" width="600" height="300"></canvas>
      </div>
    </div>
  </div>




  <h2 style="text-align: center;">–í–∞—à—ñ –∑–∞–ø–∏—Å–∏</h2>

  <div style="margin-bottom: 20px;">
    <button onclick="location.href='/add/income'" style="padding: 10px 20px; margin-right: 10px; background-color: #4CAF50; color: white; border: none; border-radius: 5px;">
      ‚ûï –î–æ–¥–∞—Ç–∏ –¥–æ—Ö—ñ–¥
    </button>

    <button onclick="location.href='/add/expense'" style="padding: 10px 20px; background-color: #f44336; color: white; border: none; border-radius: 5px;">
      ‚ûñ –î–æ–¥–∞—Ç–∏ –≤–∏—Ç—Ä–∞—Ç—É
    </button>
  </div>

  <div class="filter-container">
    <label>–ü–µ—Ä—ñ–æ–¥ –∑:
      <input type="date" id="date_from" min="{{ min_date }}">
    </label>
    <label>–ø–æ:
      <input type="date" id="date_to" />
    </label>
    <label>
      <input type="checkbox" id="monthly_only" /> –¢—ñ–ª—å–∫–∏ —â–æ–º—ñ—Å—è—á–Ω—ñ
    </label>
  </div>

    <div id="balance_message" class="message-box"></div>
    <div id="balance_difference" class="balance-difference"></div>
    <div id="top_expense_categories" class="top-expense-categories"></div>



  <div style="display: flex; gap: 40px;">
    <!-- –î–æ—Ö–æ–¥–∏ -->
    <div style="flex: 1;">
      <h2>–î–æ—Ö–æ–¥–∏</h2>
      <p>–ó–∞–≥–∞–ª—å–Ω–∞ —Å—É–º–∞: <span id="income_total">0.00</span> ‚Ç¥</p>
      <table id="income_table" border="1" cellpadding="8" cellspacing="0" style="width:100%;">
        <thead>
          <tr>
            <th style="width: 35px; cursor: pointer;" onclick="sortTable(this, 'date')">–î–∞—Ç–∞ ‚¨ç</th>
            <th style="width: 70px;">–ö–∞—Ç–µ–≥–æ—Ä—ñ—è</th>
            <th style="width: 330px;">–ù–∞–∑–≤–∞</th>
            <th style="width: 100px; cursor: pointer;" onclick="sortTable(this, 'amount')">–°—É–º–∞ (‚Ç¥) ‚¨ç</th>
            <th style="width: 45px; cursor: pointer;" onclick="sortTable(this, 'rating')">–û—Ü—ñ–Ω–∫–∞ ‚¨ç</th>
            <th style="width: 85px;">–©–æ–º—ñ—Å—è—á–Ω–∏–π</th>
            <th style="width: 25px;"></th>
          </tr>
        </thead>
        <tbody>
          {% for r in records if r.type.value == "income" %}
            <tr
              data-date="{{ r.date }}"
              data-amount="{{ r.amount }}"
              data-rating="{{ r.rating }}"
              data-monthly="{{ '1' if r.is_monthly else '0' }}"
            >
              <td>{{ r.date }}</td>
              <td>{{ r.category }}</td>
              <td>{{ r.name if r.name else "-" }}</td>
              <td>{{ "%.2f"|format(r.amount) }}</td>
              <td >{{ r.rating }}‚òÖ</td>
              <td>{{ "–¢–∞–∫" if r.is_monthly else "–ù—ñ" }}</td>
              <td>
                <form method="post" action="/delete/{{ r.id }}" onsubmit="return confirmDelete();">
                  <button style="background-color: #e53935; color: white; border: none; padding: 5px 10px; border-radius: 4px;">üóë</button>
                </form>
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <!-- –í–∏—Ç—Ä–∞—Ç–∏ -->
    <div style="flex: 1;">
      <h2>–í–∏—Ç—Ä–∞—Ç–∏</h2>
      <p>–ó–∞–≥–∞–ª—å–Ω–∞ —Å—É–º–∞: <span id="expense_total">0.00</span> ‚Ç¥</p>
      <table id="expense_table" border="1" cellpadding="8" cellspacing="0" style="width:100%;">
        <thead>
          <tr>
            <th style="width: 35px; cursor: pointer;" onclick="sortTable(this, 'date')">–î–∞—Ç–∞ ‚¨ç</th>
            <th style="width: 70px;">–ö–∞—Ç–µ–≥–æ—Ä—ñ—è</th>
            <th style="width: 330px;">–ù–∞–∑–≤–∞</th>
            <th style="width: 100px; cursor: pointer;" onclick="sortTable(this, 'amount')">–°—É–º–∞ (‚Ç¥) ‚¨ç</th>
            <th style="width: 45px; cursor: pointer;" onclick="sortTable(this, 'rating')">–û—Ü—ñ–Ω–∫–∞ ‚¨ç</th>
            <th style="width: 85px;">–©–æ–º—ñ—Å—è—á–Ω–∞</th>
            <th style="width: 25px;"></th>
          </tr>
        </thead>
        <tbody>
          {% for r in records if r.type.value == "expense" %}
            <tr
              data-date="{{ r.date }}"
              data-amount="{{ r.amount }}"
              data-rating="{{ r.rating }}"
              data-monthly="{{ '1' if r.is_monthly else '0' }}"
            >
              <td>{{ r.date }}</td>
              <td>{{ r.category }}</td>
              <td>{{ r.name if r.name else "-" }}</td>
              <td>{{ "%.2f"|format(r.amount) }}</td>
              <td>{{ r.rating }}‚òÖ</td>
              <td>{{ "–¢–∞–∫" if r.is_monthly else "–ù—ñ" }}</td>
              <td>
                <form method="post" action="/delete/{{ r.id }}" onsubmit="return confirmDelete();">
                  <button style="background-color: #e53935; color: white; border: none; padding: 5px 10px; border-radius: 4px;">üóë</button>
                </form>
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</body>
</html>


<script>
    function sortTable(th, key) {
      const table = th.closest("table");
      const tbody = table.querySelector("tbody");
      const rows = Array.from(tbody.querySelectorAll("tr")).filter(row => row.style.display !== "none");

      // –ó–Ω—è—Ç–∏ –≤—Å—ñ —Å—Ç—Ä—ñ–ª–∫–∏ –∑ —ñ–Ω—à–∏—Ö –∑–∞–≥–æ–ª–æ–≤–∫—ñ–≤
      const allThs = table.querySelectorAll("th");
      allThs.forEach(header => {
        if (header !== th) {
          header.textContent = header.textContent.replace(/[‚¨Ü‚¨á]/g, '‚¨ç');
          header.removeAttribute('data-order');
        }
      });

      // –í–∏–∑–Ω–∞—á–∏—Ç–∏ –Ω–∞–ø—Ä—è–º–æ–∫
      const ascending = th.dataset.order !== "asc";
      th.dataset.order = ascending ? "asc" : "desc";

      // –û–Ω–æ–≤–∏—Ç–∏ —Å—Ç—Ä—ñ–ª–∫—É
      const baseText = th.textContent.replace(/[‚¨Ü‚¨á‚¨ç]/g, '').trim();
      th.textContent = baseText + (ascending ? " ‚¨Ü" : " ‚¨á");

      // –°–æ—Ä—Ç—É–≤–∞–Ω–Ω—è
      rows.sort((a, b) => {
        let aVal = a.dataset[key];
        let bVal = b.dataset[key];

        if (key === 'date') {
          aVal = parseDate(aVal);
          bVal = parseDate(bVal);
        } else {
          aVal = parseFloat(aVal);
          bVal = parseFloat(bVal);
        }

        if (aVal < bVal) return ascending ? -1 : 1;
        if (aVal > bVal) return ascending ? 1 : -1;
        return 0;
      });

      rows.forEach(row => tbody.appendChild(row));
    }


  function confirmDelete() {
    return confirm("–í–∏ –≤–ø–µ–≤–Ω–µ–Ω—ñ, —â–æ —Ö–æ—á–µ—Ç–µ –≤–∏–¥–∞–ª–∏—Ç–∏ —Ü–µ–π –∑–∞–ø–∏—Å?");
  }

  function parseDate(input) {
    if (!input) return null;
    const parts = input.split("-");
    return new Date(parts[0], parts[1] - 1, parts[2]);
  }

  function countMonthlyOccurrences(startDateStr, from, to) {
    if (!startDateStr) return 0;

    const start = parseDate(startDateStr);
    const periodFrom = from || start;
    const periodTo = to || new Date();

    if (start > periodTo) return 0;

    let count = 0;
    let current = new Date(start.getFullYear(), start.getMonth(), start.getDate());

    while (current <= periodTo) {
      if (current >= periodFrom && current <= periodTo) {
        count++;
      }
      current.setMonth(current.getMonth() + 1);
    }

    return count;
  }

  function filterAndCalculate() {
    const dateFrom = parseDate(document.getElementById('date_from').value);
    const dateTo = parseDate(document.getElementById('date_to').value);
    const monthlyOnly = document.getElementById('monthly_only').checked;

    let incomeTotal = 0;
    const incomeRows = document.querySelectorAll("#income_table tbody tr");
    incomeRows.forEach(row => {
      const rowDate = parseDate(row.dataset.date);
      const amount = parseFloat(row.dataset.amount);
      const isMonthly = row.dataset.monthly === "1";
      const startDateStr = row.dataset.date;

      let visible = true;

      if (dateFrom && rowDate < dateFrom && !isMonthly) visible = false;
      if (dateTo && rowDate > dateTo && !isMonthly) visible = false;
      if (monthlyOnly && !isMonthly) visible = false;

      let count = 1;
      if (isMonthly) {
        count = countMonthlyOccurrences(startDateStr, dateFrom, dateTo);
        visible = count > 0;
      }

      row.style.display = visible ? "" : "none";

      if (visible) {
        incomeTotal += amount * count;
      }
    });


    document.getElementById('income_total').textContent = incomeTotal.toFixed(2);

    const today = new Date().toISOString().split("T")[0];
    document.getElementById("date_from").setAttribute("max", today);
    document.getElementById("date_to").setAttribute("max", today);

    let expenseTotal = 0;
    const expenseRows = document.querySelectorAll("#expense_table tbody tr");

    // –î–ª—è –ø—ñ–¥—Ä–∞—Ö—É–Ω–∫—É –≤–∏—Ç—Ä–∞—Ç –ø–æ –∫–∞—Ç–µ–≥–æ—Ä—ñ—è—Ö (–¥–ª—è –≤–∏–≤–æ–¥—É –¢–û–ü)
    const expenseByCategory = {};

    expenseRows.forEach(row => {
      const rowDate = parseDate(row.dataset.date);
      const amount = parseFloat(row.dataset.amount);
      const isMonthly = row.dataset.monthly === "1";
      const startDateStr = row.dataset.date;
      const category = row.cells[1].textContent.trim();

      let visible = true;

      if (dateFrom && rowDate < dateFrom && !isMonthly) visible = false;
      if (dateTo && rowDate > dateTo && !isMonthly) visible = false;
      if (monthlyOnly && !isMonthly) visible = false;

      let count = 1;
      if (isMonthly) {
        count = countMonthlyOccurrences(startDateStr, dateFrom, dateTo);
        visible = count > 0;
      }

      row.style.display = visible ? "" : "none";

      if (visible) {
        const totalAmount = amount * count;
        expenseTotal += amount * count;

        if (!expenseByCategory[category]) {
          expenseByCategory[category] = 0;
        }
        expenseByCategory[category] += totalAmount;
      }
    });
    document.getElementById('expense_total').textContent = expenseTotal.toFixed(2);

    // –û–±—á–∏—Å–ª–µ–Ω–Ω—è –±–∞–ª–∞–Ω—Å—É —ñ –≤–∏–≤—ñ–¥ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
    const balanceMessageDiv = document.getElementById('balance_message');
    const balanceDifferenceDiv = document.getElementById('balance_difference');
    const topExpenseCategoriesDiv = document.getElementById('top_expense_categories');

    topExpenseCategoriesDiv.innerHTML = ''; // –æ—á–∏—Å—Ç–∏—Ç–∏ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ–π —Å–ø–∏—Å–æ–∫
    balanceMessageDiv.className = ""; // —Å–∫–∏–Ω—É—Ç–∏ –∫–ª–∞—Å–∏
    balanceDifferenceDiv.textContent = ''; // —Å–∫–∏–Ω—É—Ç–∏ —Ä—ñ–∑–Ω–∏—Ü—é

    const diff = incomeTotal - expenseTotal;
    const absDiff = Math.abs(diff).toFixed(2);
    const tolerance = incomeTotal * 0.05; // 5% —Ç–æ–ª–µ—Ä–∞–Ω—Ç–Ω—ñ—Å—Ç—å

    if (expenseTotal > incomeTotal) {
      balanceMessageDiv.textContent = "–£–≤–∞–≥–∞! –í–∞—à—ñ –≤–∏—Ç—Ä–∞—Ç–∏ –ø–µ—Ä–µ–≤–∏—â—É—é—Ç—å –¥–æ—Ö–æ–¥–∏. –†–µ–∫–æ–º–µ–Ω–¥—É—î–º–æ –ø–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ —Å–≤–æ—ó –≤–∏—Ç—Ä–∞—Ç–∏ –∑–∞ –∫–∞—Ç–µ–≥–æ—Ä—ñ—è–º–∏ –∑ –Ω–∞–π–±—ñ–ª—å—à–∏–º–∏ —Å—É–º–∞–º–∏:";
      balanceMessageDiv.classList.add("warning");
      balanceDifferenceDiv.textContent = `–†—ñ–∑–Ω–∏—Ü—è: -${absDiff} ‚Ç¥ (–ø–µ—Ä–µ–≤–∏—Ç—Ä–∞—Ç–∞)`;

      // –¢–û–ü-3 –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó –≤–∏—Ç—Ä–∞—Ç
      const sortedCategories = Object.entries(expenseByCategory)
        .sort((a, b) => b[1] - a[1])
        .slice(0, 3);

      if (sortedCategories.length > 0) {
        const list = document.createElement('ul');
        sortedCategories.forEach(([cat, sum]) => {
          const li = document.createElement('li');
          li.textContent = `${cat}: ${sum.toFixed(2)} ‚Ç¥`;
          list.appendChild(li);
        });
        topExpenseCategoriesDiv.appendChild(list);
      }

    } else if (Math.abs(diff) <= tolerance) {
      balanceMessageDiv.textContent = "–í–∞—à—ñ –¥–æ—Ö–æ–¥–∏ –ø—Ä–∏–±–ª–∏–∑–Ω–æ –¥–æ—Ä—ñ–≤–Ω—é—é—Ç—å –≤–∏—Ç—Ä–∞—Ç–∞–º. –†–µ–∫–æ–º–µ–Ω–¥—É—î–º–æ –∑–±—ñ–ª—å—à–∏—Ç–∏ –¥–æ—Ö—ñ–¥ –¥–ª—è –∫—Ä–∞—â–æ—ó —Ñ—ñ–Ω–∞–Ω—Å–æ–≤–æ—ó —Å—Ç–∞–±—ñ–ª—å–Ω–æ—Å—Ç—ñ.";
      balanceMessageDiv.classList.add("neutral");
      balanceDifferenceDiv.textContent = `–†—ñ–∑–Ω–∏—Ü—è: ${diff.toFixed(2)} ‚Ç¥`;

    } else {
      balanceMessageDiv.textContent = "–í–∞—à—ñ –¥–æ—Ö–æ–¥–∏ –ø–µ—Ä–µ–≤–∏—â—É—é—Ç—å –≤–∏—Ç—Ä–∞—Ç–∏. –¢–∞–∫ —Ç—Ä–∏–º–∞—Ç–∏! –ë–∞–∂–∞—î–º–æ —É–¥–∞—á—ñ!";
      balanceMessageDiv.classList.add("success");
      balanceDifferenceDiv.textContent = `–†—ñ–∑–Ω–∏—Ü—è: +${diff.toFixed(2)} ‚Ç¥`;
    }


  }


  window.addEventListener('load', () => {
    const dateToInput = document.getElementById('date_to');
    const dateFromInput = document.getElementById('date_from');

    const today = new Date().toISOString().split("T")[0];
    if (dateToInput && !dateToInput.value) {
      dateToInput.value = today;
    }

    const minDate = dateFromInput.min;

    dateFromInput.addEventListener('change', () => {
      if (minDate && dateFromInput.value < minDate) {
        dateFromInput.value = minDate;
      }
      if (dateFromInput.value > dateToInput.value) {
        dateFromInput.value = dateToInput.value;
      }
    });

    dateToInput.addEventListener('change', () => {
      if (dateFromInput.value > dateToInput.value) {
        dateFromInput.value = dateToInput.value;
      }
    });

    document.getElementById('monthly_only').addEventListener('change', filterAndCalculate);
    document.getElementById('date_from').addEventListener('change', filterAndCalculate);
    document.getElementById('date_to').addEventListener('change', filterAndCalculate);

    filterAndCalculate();


    // üü¢ –î–æ—Ö–æ–¥–∏ ‚Äî –≥—Ä–∞—Ñ—ñ–∫
    const incomeCtx = document.getElementById('incomeRatingChart')?.getContext('2d');
    if (incomeCtx) {
      new Chart(incomeCtx, {
        type: 'bar',
        data: {
          labels: {{ income_avg_labels | tojson }},
          datasets: [{
            label: '–°–µ—Ä–µ–¥–Ω—è –æ—Ü—ñ–Ω–∫–∞ –¥–æ—Ö–æ–¥—ñ–≤',
            data: {{ income_avg_rating_values | tojson }},
            backgroundColor: 'rgba(76, 175, 80, 0.6)',
            borderColor: 'rgba(76, 175, 80, 1)',
            borderWidth: 1
          }]
        },
        options: {
          scales: {
            y: {
              min: 0,
              max: 5,
              title: {
                display: true,
                text: '–û—Ü—ñ–Ω–∫–∞'
              }
            }
          }
        }
      });
    }

    // üî¥ –í–∏—Ç—Ä–∞—Ç–∏ ‚Äî –≥—Ä–∞—Ñ—ñ–∫
    const expenseCtx = document.getElementById('expenseRatingChart')?.getContext('2d');
    if (expenseCtx) {
      new Chart(expenseCtx, {
        type: 'bar',
        data: {
          labels: {{ expense_avg_labels | tojson }},
          datasets: [{
            label: '–°–µ—Ä–µ–¥–Ω—è –æ—Ü—ñ–Ω–∫–∞ –≤–∏—Ç—Ä–∞—Ç',
            data: {{ expense_avg_rating_values | tojson }},
            backgroundColor: 'rgba(244, 67, 54, 0.6)',
            borderColor: 'rgba(244, 67, 54, 1)',
            borderWidth: 1
          }]
        },
        options: {
          scales: {
            y: {
              min: 0,
              max: 5,
              title: {
                display: true,
                text: '–û—Ü—ñ–Ω–∫–∞'
              }
            }
          }
        }
      });
    }

    // –ó–±–∏—Ä–∞—î–º–æ –¥–∞–Ω—ñ
    let incomeDataPoints = {{ income_avg_amount_values | tojson }}.map((amount, i) => {
      return { x: amount, y: {{ income_avg_rating_values | tojson }}[i] };
    });

    // –°–æ—Ä—Ç—É—î–º–æ –ø–æ x (—Å–µ—Ä–µ–¥–Ω—è —Å—É–º–∞)
    incomeDataPoints.sort((a, b) => a.x - b.x);

    const ctxIncome = document.getElementById('incomeLineChart').getContext('2d');

    new Chart(ctxIncome, {
      type: 'scatter',
      data: {
        datasets: [{
          label: '–ó–∞–ª–µ–∂–Ω—ñ—Å—Ç—å —Å–µ—Ä–µ–¥–Ω—å–æ—ó –æ—Ü—ñ–Ω–∫–∏ –≤—ñ–¥ —Å–µ—Ä–µ–¥–Ω—å–æ—ó —Å—É–º–∏ (–¥–æ—Ö–æ–¥–∏)',
          data: incomeDataPoints,
          showLine: true,
          fill: false,
          borderColor: 'rgba(75, 192, 192, 1)',
          backgroundColor: 'rgba(75, 192, 192, 0.5)',
          pointRadius: 5,
          pointHoverRadius: 7,
          tension: 0.3
        }]
      },
      options: {
        scales: {
          x: {
            title: { display: true, text: '–°–µ—Ä–µ–¥–Ω—è —Å—É–º–∞ (‚Ç¥)' },
            beginAtZero: true
          },
          y: {
            title: { display: true, text: '–°–µ—Ä–µ–¥–Ω—è –æ—Ü—ñ–Ω–∫–∞' },
            min: 0,
            max: 5
          }
        }
      }
    });



    let expenseDataPoints = {{ expense_avg_amount_values | tojson }}.map((amount, i) => {
      return { x: amount, y: {{ expense_avg_rating_values | tojson }}[i] };
    });

    expenseDataPoints.sort((a, b) => a.x - b.x);

    const ctxExpense = document.getElementById('expenseLineChart').getContext('2d');

    new Chart(ctxExpense, {
      type: 'scatter',
      data: {
        datasets: [{
          label: '–ó–∞–ª–µ–∂–Ω—ñ—Å—Ç—å —Å–µ—Ä–µ–¥–Ω—å–æ—ó –æ—Ü—ñ–Ω–∫–∏ –≤—ñ–¥ —Å–µ—Ä–µ–¥–Ω—å–æ—ó —Å—É–º–∏ (–≤–∏—Ç—Ä–∞—Ç–∏)',
          data: expenseDataPoints,
          showLine: true,
          fill: false,
          borderColor: 'rgba(255, 99, 132, 1)',
          backgroundColor: 'rgba(255, 99, 132, 0.5)',
          pointRadius: 5,
          pointHoverRadius: 7,
          tension: 0.3
        }]
      },
      options: {
        scales: {
          x: {
            title: { display: true, text: '–°–µ—Ä–µ–¥–Ω—è —Å—É–º–∞ (‚Ç¥)' },
            beginAtZero: true
          },
          y: {
            title: { display: true, text: '–°–µ—Ä–µ–¥–Ω—è –æ—Ü—ñ–Ω–∫–∞' },
            min: 0,
            max: 5
          }
        }
      }
    });

  });
</script>

